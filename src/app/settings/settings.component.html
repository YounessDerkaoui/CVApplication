<div class="general">

  <div *ngIf="usernameError" class="error-message alert alert-danger">
    Le nom d'utilisateur existe déjà. Veuillez en choisir un autre.
  </div>
    <mat-form-field>
        <mat-label>Nom d'utilisateur</mat-label>
        <input matInput autocomplete="off" (input)="onInputChange()" [(ngModel)]="username" [readonly]="isUsernameReadonly">
        <mat-icon matSuffix class="clickable" color="primary"
                  (click)="toggleInput('username')">
        change_circle
        </mat-icon>
    </mat-form-field>

  <div *ngIf="emailError" class="error-message alert alert-danger">
    L'adresse e-mail existe déjà. Veuillez en choisir une autre.
  </div>
    <mat-form-field>
      <mat-label>Adresse mail</mat-label>
      <input matInput autocomplete="off" (input)="onInputChange()" [(ngModel)]="email" [readonly]="isEmailReadonly">
      <mat-icon matSuffix class="clickable" color="primary"
                (click)="toggleInput('email')">
        change_circle
      </mat-icon>
    </mat-form-field>

    <mat-form-field>
      <mat-label>Poste Occupé</mat-label>
      <mat-select [(ngModel)]="currentPosition" [disabled]="isCurrentPositionReadonly">
        <mat-option *ngFor="let position of positions" [value]="position">{{ position }}</mat-option>
      </mat-select>
      <mat-icon matSuffix class="clickable" color="primary"
                (click)="toggleInput('currentPosition')">
        change_circle
      </mat-icon>
    </mat-form-field>

  <div class="form-group">
    <label class="form-label">
      <span class="form-label__title">Sélectionner une image de profil :</span>
      <input
        type="file"
        name="profileImage"
        class="form-input form-input__profile-image"
        (change)="onFileSelected($event)"
      />
    </label>
    <div class="preview-image" *ngIf="profilePicture">
      <img [src]="profilePicture" width="90" height="90" style="border-radius: 50%" />
    </div>
  </div>


  <mat-divider style="margin-top: 20px;margin-bottom: 20px;"></mat-divider>


  <div *ngIf="passwordError" class="error-message alert alert-danger">
    Le mot de passe actuel est incorrect. Veuillez réessayer.
  </div>

    <mat-form-field>
        <mat-label>Mot de passe actuel</mat-label>
        <input matInput (input)="onInputChange()" [type]="hideOldPassword ? 'password' : 'text'" [(ngModel)]="oldPassword"  autocomplete="off">
        <mat-icon matSuffix color="primary"
                  (click)="toggleInput('oldPassword')">remove_red_eye</mat-icon>
    </mat-form-field>

    <mat-form-field>
      <mat-label>Nouveau mot de passe</mat-label>
      <input matInput (input)="onInputChange()" [type]="hideNewPassword ? 'password' : 'text'" [(ngModel)]="newPassword"  autocomplete="new-password">
      <mat-icon matSuffix color="primary"
                (click)="toggleInput('newPassword')">remove_red_eye</mat-icon>
    </mat-form-field>

    <div class="button-container">
        <button mat-flat-button extended color="primary" class="right-button"
        [disabled]="!isFormModified()" (click)="changeData()">Modifier</button>
    </div>

</div>
